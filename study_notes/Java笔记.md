# Java笔记



参考书为Java疯狂讲义，或者Head First Java

### 准备工作

#### 开发环境

-   首先我们必须在电脑上安装JDK，去oracle官网，在菜单找开发者，开发者资源，向下翻找到java，然后查看所有，找到download里面的java SE，然后去下载页面找到JDK，找到合适的版本，下载，安装即可。安装过程中不需要做太多的更改，只需要改一下想要安装的文件夹即可

-   安装完成，我们还需要配置环境变量

    首先找到控制面板-系统-高级系统设置-高级-环境变量，然后再系统环境变量里面点新建，名字为`JAVA_HOME`，值为你的JDK的安装目录，例如：`C:\Program Files\Java\jdk1.8.0_92`

    然后继续新建，名字为`CLASSPATH`，值为`.;%JAVA_HOME%\lib\dt.jar;%JAVA_HOME%\lib\tools.jar;`

    接下来找到系统环境变量里面的Path，点编辑，在最后添加`;%JAVA_HOME%\bin`，确定，配置完成

-   验证，我们只需要打开命令行，输入`java -version`，如果输出正常版本信息即说明完成

-   我们只需要到eclipse官网下载合适版本的软件，解压安装即可，也许你会注意到上面写着forjava EE，但是不必担心，无所谓的

#### 一点说明

安装JDK的同时就会安装JRE，当你安装完了jdk之后，你大概会在目录下发现jdk和jre，前者是开发环境，后者是运行环境，运行环境包含了各种API和虚拟机，开发环境主要包含了编译器

关于版本，之前可能看到过Java EE，Java SE，Java ME之类的东西，这其实是Java的三个版本，最初在JDK1.2的时候产生了分化，分为J2ME,J2SE,J2EE，第一个是面向移动设备和家电的控制的，第二个是整个JAVA的核心和基础，也是1，3的基础，也是我们主要学习的，第三个是java中应用最广的，主要面向企业应用开发。这三个版本一直存在，直到2004年将这三个改成了最前面我们见到的三个名字

####创建项目和运行

我使用Eclipse进行学习。

首先我们要在file->new->java project，然后输入项目名字即可，不需要更改默认设置，点击Finish即可。

接下来就会在package explore出现这个项目的文件夹，点开，里面有一个src目录，在该目录右键new->class，输入类名即可，一般与项目名称一致，不需更改默认设置，完成即可。

此时编辑器就会出现这个文件的编辑页面，输入以下代码：

~~~java
public class HelloWorld {  
    
    public static void main(String[] args) {
        System.out.println("Hello this is stan");
    }
    
}
~~~

需要注意，这里的类名必须与.java文件的名字一致

接下来就是运行，运行有两种方法：

-   在Eclipse里面保存之后，直接在编辑页面右键，run as 选择java application点击即可

-   找到.java文件所在的文件夹，在该文件夹打开命令行，然后输入`javac HelloWorld.java`，注意文件名是你的文件，这一步将源文件编译为class字节码文件，产生了一个.class文件，然后再输入`java HelloWorld`

    即运行了。

除了上面使用Eclipse开发之外，我们可以直接使用文本编辑器写代码文件，然后编译运行即可



### 基本规则

java纯粹面向对象，程序因此必须以类的形式存在

源码的后缀必须是.java，通常情况下文件名是不做要求的，但是如果源码中定义了一个public类，那么文件名必须与该public类保持一致，也正因如此，一个文件至多只能有一个public类，但是可以包含多个类

上面算是硬性要求，但是为了规范和增强可读性，常有以下建议：

-   一个源文件只包含一个类，不同类放在不同文件中
-   每个文件中单独定义的类都定义为public，然后文件名与该类一致

#### 关于输入输出

java的运行入口是main方法，如果我们要运行一个类，则必须要写一个mian方法，然后这个方法必须使用public static修饰，这两个修饰符位置可互换，返回值必须是void类型，接受的参数也是固定的，必须是字符串数组。总而言之main推荐是这样的形式：

~~~java
public static void mian(String[] args) 
{
    
}
~~~



java里面的输出主要有两个函数：`System.out.print()`和`System.out.println()`



#### 关于注释

java有三种注释：单行注释，多行注释，文档注释

单行注释使用`//`，多行注释使用`/*  */`

文档注释是这样的形式：`/**注释*/`



### 数据类型与运算符

java的关键字全是小写

是一种强类型语言

#### 基本数据类型

基本数据类型包含整型，字符类型，浮点，布尔四大类

其中的整型包含byte 1字节，short 2，int 4，long 8

字符类型只有char 2

浮点型包含了float 4和double 8

布尔类型 boolean 1位 true false

字符串类型不是基本数据类型，而是一个类

####零星介绍

字符类型必须使用单引号，String使用双引号

运算符只支持+-*/，%，++,--

更多的乘方等必须依赖java.lang.Math

扩展运算符还包含了+=,-=，*=，/=等等

比较运算符包含了：>,<,==,>=,<=,!=

逻辑运算符包含&&,||,!

还有一个三目运算符



### 语句

if语句还是一般的样式，长的只能使用else if

switch我依旧很少使用

while也别无二致

do while也很少用

for循环也一样，for(init;test;interation)

同样也有break,continue,return



### 数组

####定义与初始

数组的定义使用:

type[] name;

type name[];

推荐使用前者，并且定义数组的时候不能指定长度

定义之后，还必须在使用之前再初始化，初始化分为静态和动态，前者直接给出每个元素，系统决定长度，后者只指定长度，系统赋初值

静态

~~~java
int[] a;
a = new int[]{1,2,3,4,5};
//简单起见，其实还是有定义和初始化一起的
int[] a={1,2,3,4,5};
~~~

动态

~~~java
int[] price = new int[5];
~~~

关于初始值，整型默认0，浮点型0.0，字符型是'\u0000'，布尔型false，引用型null

不要在指定初始值的同时指定长度

#### 使用

索引方式也是[]，下标自0开始

每个数组都有一个length属性，标明长度

对于迭代类型，现在有提供了一种便捷的访问

~~~java
int[] a={1,2,3,4,5};
for(int i : a)
{
    System.out.println(i);
}
~~~

要注意这种便捷访问只能用来访问，不要用以改变数组的值



怎么说呢，数组变量只要类型相同，即便长度不一致，也是可以互相赋值的，例如int[] a={1,2,3};int[] b=new int[4];b=a;

这个时候只是让b重新指向了a的内存，所以看起来是长度可变的。

实际上还是我说的，这种复合类型都是直接和内存相关的

#### 多维数组

严格上说java是没有多维数组的，但是我们可以使用

定义和初始化方法有这些：

~~~java
//1
int[][] a;
a = new int[3][];
a[0] = new int[2];

//2
int[][] b=new int[3][4];

//3
int[][] b=new int[][]{new int[3],new int[4]};
~~~

最自然的还是第二种

有一个Array类，提供了很多操作数组的方法，这里暂时不再说明



### 类

所有的类都是引用类型

定义一个类是以下结构 ：

~~~java
修饰符 class name
{
    构造器
    属性
    方法
}
~~~

类的修饰符可以是public final二者之一，或者没有

类的成员有三种，构造器，属性，方法。构造器控制如何产生实例，如果没有则无法产生实例，默认系统会提供一个

成员之间不分先后，可以互相调用，但是static修饰的成员不能调用没有static修饰的成员

#### 属性

属性必须指定类型，可以在前面加修饰符，可以不加，修饰符的范围是`public protected private static final`

前三者只能选一个，后二者互不冲突

#### 方法

方法与普通函数的定义没区别，最前面也可以加修饰符，修饰符的范围是`public protected private static final abstract`，前三者只能选一个，后两者只能选一个



static这个关键字表示这是属于类共有的，而不是一个类的单个实例。有static修饰的属性和方法称为类属性，类方法。没有的称为实例属性，实例方法

或者称前者为静态属性方法，后者非静态属性方法，静态成员的不能直接访问非静态成员



#### 构造器

构造器是一个特殊方法，可以加修饰符`public protected private`三者之一，没有返回值相关字段，可以带参数，名字必须与所在类保持一致



#### 使用

例如已经创建了一个Hello类，然后使用Hello a = new Hello();创建一个实例



#### this

与python里面的self一样，但是因为在一个对象内调用自己的成员十分常见，所以在java里面实际上我们可以省略this。

然后还是要特别注意，还是之前所说的static修饰的方法不能直接调用没有static修饰的成员（属性和方法）

本质上当你直接调用的时候，系统相当于使用了this

如果你必须在静态方法中访问普通方法，那么必须创建一个新的对象，例如前面有个fun()普通方法，在main中调用它，则必须这样：

new StaticAccessNonStatic().fun();

还有一些情况必须使用this进行解决，例如在方法内有一个局部变量和属性同名。



#### 方法的参数传递

书中特意指出，参数传递的时候是值传递，也就是说传的只是副本，我以为即便是构造类型例如数组也是如此，但是并不是，经过测试，构造类型一如我之前所说依然是传引用。所以这里特意提出的值传递与其他语言中的基本类型的值传递别无二致。

##### 形参长度可变

可以支持长度可变的形参，但是有相当的限制：长度可变的形参只能位于参数列表的最后，换句话说只能有一个，然后这些可变参数必须是相同类型。

`void test(int a,String... books)`

如上所示，只需要在最后一个参数的类型后面紧跟三个.即可，这时如果传入了多个String类型的参数，这些参数将以数组的形式存在books中。

#### 递归

我讨厌递归



#### 方法重载

如果同一个类里面有两个名字一致的方法，但是他们的形参列表不同，那么调用方法的时候系统将自动匹配，调用不同的方法。

记清楚要求，同一个类，方法名字一致，参数列表不同，至于修饰符，返回值什么的完全没有要求

然后还要注意一个可变长度的形参的问题，例如有两个方法，一个的形参是一个String，另一个是一个长度可变的String，那么当你传入一个String的时候，系统将优先调用形参是一个String的方法。虽然这样也是可以的，但是严重不推荐使用参数长度可变的方法重载，尤其是形参列表除了长度不同别无二致的。

#### 关于static

static到底有什么用？

我们来考虑一下，程序的唯一入口是修饰符为static的main方法，而static不能调用非static成员，这意味着，如果你如果把一个成员标记为非static，那么在类的本体内，我们将永远无法直接运行，使用这个变量，要想使用，我们必须创建一个实例，所以书上的说法十分准确，static代表这是一个类成员，没有static则是实例成员

但是仅仅如此吗？static还有静态的意思，这意味着如果一个成员如果被标记为static，那么任何一个实例对该成员的修改将直接映射，影响到类的本体，以后创建的任何新的实例都会受到影响。

举例来说，如果类的定义里面有一个`static int x = 10;`，这时，我们创建一个实例`test`，那么当我们做这样的操作之后`test.x = 100;`，以后再创建新的实例如`t2`，那么`t2.x`的初始值就将被改变为`100`

不仅如此，static的影响力更大，从内存的角度来讲，同一个类的不同实例的非static成员在内存中处于不同的位置，而同一个类的不同实例的static成员与类本体共同在内存里占有相同的一块位置，换句话说一个实例的修改会扩散到所有实例，无论是之前还是之后创建的。

但是非static类型的就不会这样，实例对非静态成员的修改将不对类本体产生任何影响



#### 局部变量

在java里面，局部变量的作用域将被控制在代码块中，例如你将一段代码使用{}括起来，那么这就是一个代码块，出了代码块就不能访问内部的局部变量；一如既往for循环也是一个代码块`for(int nats=1;nats<5;nats++)`这里面的nats出了for就没了

我们该怎么使用变量呢？明显可以观察出类属性范围最大，其次是方法的局部变量，然后是代码块局部变量，我们应该尽量缩小变量的作用域，换句话说，我们应该尽量使用代码块局部变量。



#### 封装与隐藏

总之，想要控制外界对于类的访问，使用，权限

##### 访问控制符

访问控制符有三个：`private protected public`，事实上我们可以不加控制符，那么其实可以称作default







