## JavaScript笔记

> --by stan 17.7.19

&lt;font color='red'>最佳参考书为JavaScript高级程序设计（第三版）&lt;/font>

### 概念

首先澄清几个概念，ECMAScript就是标准化的Js,事实上现在人们通常认为二者是同义词，但是呢，更严格地讲，Js的范围要更广一些，他应该包含基本的Js,DOM（文档对象模型），BOM（浏览器对象模型）
DOM似乎是完成了js和html,css的接口，甚至是一些鼠标事件

### 数据类型

下面写的很混乱，在这里重新声明一下，js的数据类型大概可以分为5种：Undefined,Null,Bool,Number,String.还有一个复杂的数据类型，叫做Object,Object本质上是一组无序的键值对，类似于python里面的字典

### 变量与类型

*   变量统一使用var声明，使用动态类型，与python一致

*   区分大小写，html不区分大小写，但是它的标签和属性在js中必须写成小写。

*   注释使用//和/**/，与C语言一致

*   分号不是必须的，但注意保持风格一致，但是在某些位置句尾还是必须要分号的，介于我还不是老手，所以建议每个句尾都加分号

#### 数字

数字同样不分类，十六进制使用0x或0X的前缀，不是所有的标准都支持直接写八进制，支持的使用0开头，所以建议不要用
浮点数支持e或E的用法
四则运算为+-*/，取余%，似乎其他复杂运算都要调用库，Math库，留待后述
溢出不报错，定义了Infinity。另外还用一个NaN。
注意不要去试探她的浮点数的精度，譬如0.3-0.2并不等于0.2-0.1  

#### 时间

js里面特别提供了一个日期或时间类型，它提供了一些方法，可以让我们快速进行计算，例如快速计算两个事件之间的毫秒数，可以直接使用减法。  

#### 字符串

js的默认编码为utf-16
单引号和双引号都可以，与python一致
可以拆分为多行，但行尾必须使用\续行
转义字符一致，暂不叙述
字符串支持加法，另外还有很多的属性和方法，例如length属性
支持索引[]
自带支持正则表达式，正则表达式使用两条/包围，第二条的后面还可以跟一个或多个修饰的字母  

#### 布尔值

保留字true,false

#### 缺失值

null,undefined
前值为空，后者就是未定义的意思  

#### 全局对象

？？？

#### 类型转换

这里的类型转换似乎要灵活得多，暂且略过，只保留字符串与数字
数字有一个toString()方法，并接受一个参数指定基数，还有更高级的toFixed,toExponential,toPrecision等方法，暂不详述。
将字符串转换为数字有parseInt(),parseFloat()等函数，很智能很高级，暂不详述
总之类型转换很灵活，很复杂，东西很多还没说  

#### 作用域

在局部作用域里面可以访问其相对全局作用域的变量，并且可以直接更改，不需要特别声明，这一点和python不同。
函数是一个局部作用域，这一点和类C语言一致，但是js中不存在块级作用域，例如在C中，当你在一个for语句，if语句内部声明了一个变量，那么你将可以在花括号内部访问该变量，但是在花括号结束时，该变量就被销毁了，但js不存在这一个作用域，for等的内部声明的变量，在外部依旧存在

### 全局对象

有一个很奇特的叫全局对象的东西，指的是一份js代码文件，也可以使用this自我引用，文件里面所有的全局变量都是this的一个属性，不使用var声明的可以使用delete删除，等等，暂不需了解太多  

### 表达式运算符

*   创建一个对象要使用new关键字
*   ++ -- += -= *= /=
*   `+ - * /`

*   == ! &amp;&amp; ||  &lt; &gt; &lt;= &lt;=
  均类似于C语言
*   还有一个什么鬼的`===`是恒等的意思，`！==`恒不等,暂时也用不上，就不深究了
*   in和instanceof暂时略过
*   还有一个神奇的eval()函数，可以直接运行字符串形式的源代码，暂不表
*   有三目运算符?:
*   typeof运算符，测量类型，如 typeof x；关于返回值的情况暂时略过
*   delete运算符，删除一个对象的属性或者一个元素
*   void运算符，可以强制去掉返回值

### 语句

#### if

~~~c
if(expression)
{
}
else if(expression)
{
}
~~~

#### switch

我没有用过switch,所以暂时不写

#### while

~~~c
while(expression)
{
}
~~~

#### do while

~~~c
do
{
}
while(expression)
~~~

#### for

~~~c
for(init;test;update)
{}
~~~

#### for/in

~~~c
for(variable in object)
{}
~~~

#### 另有

跳转部分的标签，break，continue，return等

#### 异常处理

throw try/catch/finally等，暂不表

#### 其他语句

with  debugger  "use strict"暂不说  

### 数组

js里面的数组更类似于python里面的列表，元素类型不限。
可以随意增长，只需要对后面的索引赋值即可，总之其索引方式异常灵活。
稀疏数组，略过
数组都有一个length属性  

*   向尾部增添一至多个元素，调用push方法*   删除用delete操作符，但是并不会改变length，而是让数组变成了稀疏数组。

*   因为稀疏数组的存在，让遍历显得略微复杂，暂不提*   数字的方法也暂时略过

###  函数

~~~c
function test(a,b)
{
	var c = a+b;
	return c;
}
~~~

##### 函数的参数

函数的参数的行为很有意思，无论你在函数的定义中写了几个形参，函数调用时从来不在意你传入了几个参数，传入也行，不传也行，数目与形参一致可以，不一致也行。这一切都是因为参数在内部是通过一个数组表示的，函数只是接受了这个数组，从不在意数组的值。在函数内部是可以通过arguments这个对象来访问所有的参数，通常情况下我们会使用arguments.length这个属性来得到参数的数目，通过[]索引来获取每一个参数。另外特别需要注意的就是，arguments与参数永远保持同步，换句话说arguments[1]永远与第二个实参保持一致，两者的改动也会保持一致，虽然两者对应的并不是同一块内存。

~~~c
function test(num1,num2)
{
	if(arguments.length==1)
	{
		alert(num1);
	}
	else if(arguments.length==2)
	{
		arguments[1] = 10;
		alert(num1+num2);
	}
}
~~~

这个函数的行为表现为传入一个参数的时候会输出这个值，传入两个参数的时候会输出第一个参数加10的结果，因为通过arguments[1]可以直接修改num2的值



### 内存管理

js内部也有自动的垃圾收集机制，但是事实上os分配给浏览器的内存数量比桌面程序要少，因而当你不再使用一个数据的时候，最后可以通过手动解除引用将其内存释放一下，方法为将变量的值设置为null  


### 引用类型

所谓引用类型与我一直以来所说的构造类型一样，之所以要特别声明这个类型就是在于复制时的表现，如果一个变量是基本类型，那么在执行a=b这样的操作时它们分别指向两块内存，改变一个值不会引起另一个值的改变，但是如果一个一个变量是引用类型，那么执行复制操作的时候，两个变量事实上指向了同一块内存，改变一个会引起另一个的改变。向函数传参的时候的表现也是这样的.  


    <font color='red'>靠！！！！刚才写的几百字竟然丢了，一直很谨慎，竟然还是中招了</font>
##### Object类型

object类型会是一个常用的引用类型，创建的方法有两种：
1、使用关键字new,`var person = new Object();`，然后直接定义属性
2、使用字面值直接定义：

~~~c
var person = {
  name = 'stan',
  age = 29
};
~~~

当使用第二种方式创建时，属性名字可以是变量名也可以是字符串，如果是数字，则会被自动转换为字符串

另外这种对象也是向函数传递不定数量的大量参数的一种很好的方式  

索引属性的方式有两种，一种是`.`，另一种是[]索引，后者必须使用字符串进行索引，第二种方式可以实现一些特殊属性名的索引，例如包含空格的名字，除此之外实质上是建议使用第一种索引的

##### Array类型

所谓Array类型实际上就是数组，之前已有部分说明，这里再详细记录一次。
创建方式和Object一样，也是两种：
1、var l = new Array();可以传入参数，当传入一个数值时，代表数组的长度，也可以传入项
2、var l = [1,2,3]; 不要企图使用多余的`,`来增加数组的长度，不同的浏览器解释方式不同  

*   索引同样使用[0~n],当设置索引不存在的项的时候会自动增加

*   数组具有length属性，不仅可读，还可写，如果将其写长，会增加undefined值，如果缩短会把后面原有的值变成undefined

*   检测对象是不是数组很重要，使用Array.isArray(value)来检测

###### 栈与队列

数组同时也实现了站和队列的操作，实现的方式为提供了几个方法，person.push()可以接受1~n个参数，把这些量依次加到数组的末端，person.pop()可以弹出数组的最后一个值，并缩短数组长度，person.shift()可以弹出数组的第一个值，并缩短长度。额外的又提供了另外一个特殊的方法，person.unshift()接收多个参数，可以把它们依次加入数组的首部，同时增加长度

###### 排序

数组也集成了排序，

##### Date类型

##### RegExp类型

##### Function类型

##### 基本包装类型

##### 单体内置对象

### 面向对象

### 函数表达式